$.engineer={default_object:{defaults:{},structure:function(){},behavior:function(){}},build:function(a,b){var c=$.engineer._find(a),d=$.extend(true,{},c.defaults,b),e={};new_obj=c.structure.call(e,d);$.extend(new_obj,e);return new_obj},make:function(a,b){var c=$.engineer._find(a),d=$.engineer.build(c,b);$.engineer._applyBehavior(d,c,b);return d},define:function(a,b){this[a]=$.extend(true,{},this.default_object,b)},template:function(a,b){var c=!/\W/.test(a)?($.engineer._tmpl_cache[a]=$.engineer._tmpl_cache[a]||
$.engineer.template(document.getElementById(a).innerHTML)):new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<#").join("\t").replace(/((^|#>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)#>/g,"',$1,'").split("\t").join("');").split("#>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');");return b?c(b):c},_tmpl_cache:{},_find:function(a){var b;b=typeof a=="object"?a:$.engineer[a];if(b==undefined)throw"The definition of '"+
a+"' either failed to define or does not exist.";return b},_applyBehavior:function(a,b,c){c=$.extend(true,{},b.defaults,c);b=b.behavior.call(a,c);a.data("publicMethods",b);return a},_transform:function(a,b,c,d){var e=$.engineer._find(b);a.each(function(i,k){var f=$(k),g={};for(var h in e.defaults)if(f.attr(h))g[h]=f.attr(h);g=$.extend(true,{},g,d);f=c(f,e,g);a[i]=f[0]});return a}};
(function(a){a.fn.makeInto=function(b){return a.engineer._transform(this,b,function(c,d,e){d=a.engineer.make(d,e);c.before(d).remove();return d})};a.fn.behaveLike=function(b,c){return a.engineer._transform(this,b,a.engineer._applyBehavior,c)};a.fn.send=function(b){for(var c=[],d=0;d<arguments.length;){j=d++;c[j]=arguments[d]}return this.each(function(){var e=a(this).data("publicMethods");if(e)(method=e[b])&&method.apply(method,c)})}})(jQuery);
